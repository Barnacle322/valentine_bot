# Valentine Bot

## Выставление env переменных

- `TOKEN` - Токен бота
- `ADMIN_GROUP` - ID группы администраторов
- `CHANNEL_ID` - ID канала с валентинками

- `DB_USER` - Имя пользователя БД
- `DB_PASS` - Пароль пользователя БД
- `DB_HOST` - Хост БД
- `DB_NAME` - Имя БД

## Установка зависимостей

`pip install -r requirements.txt`

## Созданиe БД

Просто запустите `db_sqlalchemy.py` и таблицы создадутся автоматически

## Запуск бота

`python main.py`

## Использование бота

- `/start` - Начать диалог с ботом
- `/help` - Помощь
- `/valentine` - Отправить валентинку

- `/block <причина>` - Работает только в админ группе. Блокирует пользователя добавляя флаг `blocked` в БД. Причина блокировки не обязательна. Эту команду нужно отправлять как reply к валентинке от бота в админ группе
- `/who` - Выдает всю информцию об отправителе валентинки. Также нужно отправить как reply

## Деплой

Я задеплоил на fly.io. [Гайд](https://bakanim.xyz/posts/deploy-telegram-bot-to-fly-io/)

Для этого нужен файл fly.toml и Dockerfile. В fly.toml нужно будет поменять `app` на свое.

Если деплоить локально, то просто можно запустить файл `main.py`
